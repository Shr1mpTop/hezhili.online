# ä½•è‡´åŠ›ä¸ªäººç½‘ç«™

è¿™æ˜¯ä½•è‡´åŠ›çš„ä¸ªäººç½‘ç«™é¡¹ç›®ï¼ŒåŒ…å«AIå¯¹è¯åŠŸèƒ½ã€è®¿å®¢ç»Ÿè®¡å’Œæ•°æ®ç®¡ç†ç³»ç»Ÿã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¤– **AIå¯¹è¯ç³»ç»Ÿ**: åŸºäºå­—èŠ‚è·³åŠ¨è±†åŒ…APIçš„æ™ºèƒ½å¯¹è¯
- ğŸ’¬ **å¯¹è¯è®°å½•**: å®Œæ•´çš„ç”¨æˆ·å¯¹è¯å†å²ä¿å­˜
- ğŸ“Š **æ•°æ®ç»Ÿè®¡**: è®¿å®¢æ•°æ®ç»Ÿè®¡å’Œåˆ†æ
- ğŸ”§ **è¿ç»´å·¥å…·**: å®Œæ•´çš„ç»´æŠ¤å’Œç›‘æ§è„šæœ¬

## é¡¹ç›®ç»“æ„

```
hezhili-website/
â”œâ”€â”€ frontend/                    # å‰ç«¯ä»£ç 
â”‚   â””â”€â”€ public/                 # é™æ€èµ„æº
â”‚       â”œâ”€â”€ pages/              # é¡µé¢æ–‡ä»¶
â”‚       â””â”€â”€ src/                # æºæ–‡ä»¶ (JS/CSS/Assets)
â”œâ”€â”€ backend/                    # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ api/app.py             # Flaskä¸»åº”ç”¨
â”‚   â”œâ”€â”€ models/database.py     # æ•°æ®åº“æ¨¡å‹
â”‚   â”œâ”€â”€ scripts/               # æ•°æ®åº“ç®¡ç†è„šæœ¬
â”‚   â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ data/                  # SQLiteæ•°æ®åº“
â”‚   â””â”€â”€ start.sh              # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ scripts/                   # è¿ç»´è„šæœ¬
â”‚   â”œâ”€â”€ backup.sh             # æ•°æ®å¤‡ä»½è„šæœ¬
â”‚   â”œâ”€â”€ health_check.sh       # å¥åº·æ£€æŸ¥è„šæœ¬
â”‚   â””â”€â”€ log_analysis.sh       # æ—¥å¿—åˆ†æè„šæœ¬
â”œâ”€â”€ logs/                     # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ certs/                    # SSLè¯ä¹¦
â”œâ”€â”€ MAINTENANCE_GUIDE.md      # ç»´æŠ¤æ‰‹å†Œ
â””â”€â”€ README.md                 # é¡¹ç›®è¯´æ˜

## å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
chmod +x start.sh
./start.sh
```

### 2. åˆå§‹åŒ–æ•°æ®åº“

```bash
cd backend
python3 scripts/init_db.py
```

### 3. è®¾ç½®ç¯å¢ƒå˜é‡

```bash
export ARK_API_KEY=your_api_key_here
```

### 4. æµ‹è¯•ç³»ç»Ÿ

```bash
# å¥åº·æ£€æŸ¥
bash scripts/health_check.sh

# æµ‹è¯•API
curl -X POST http://127.0.0.1:5000/chat \
  -H "Content-Type: application/json" \
  -d '{"text": "ä½ å¥½"}'
```

## è¿ç»´ç®¡ç†

### æ—¥å¸¸ç»´æŠ¤è„šæœ¬

- **å¥åº·æ£€æŸ¥**: `bash scripts/health_check.sh` - æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
- **æ•°æ®å¤‡ä»½**: `bash scripts/backup.sh` - å¤‡ä»½æ•°æ®åº“å’Œé…ç½®
- **æ—¥å¿—åˆ†æ**: `bash scripts/log_analysis.sh` - åˆ†æè®¿é—®æ—¥å¿—å’Œæ€§èƒ½

### æ•°æ®åº“ç®¡ç†

```bash
# åˆå§‹åŒ–æ•°æ®åº“
cd backend && python3 scripts/init_db.py

# ç›´æ¥æŸ¥è¯¢æ•°æ®åº“
sqlite3 backend/data/chat_records.db

# æŸ¥çœ‹å¯¹è¯è®°å½•
sqlite3 backend/data/chat_records.db "SELECT * FROM chat_messages ORDER BY timestamp DESC LIMIT 10;"
```

### æœåŠ¡ç®¡ç†

```bash
# å¯åŠ¨æœåŠ¡
cd backend && ./start.sh

# åœæ­¢æœåŠ¡
pkill -f "python.*app.py"

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
ps aux | grep "python.*app.py"

# æŸ¥çœ‹æ—¥å¿—
tail -f logs/flask.log
```

## API æ¥å£

### èŠå¤©æ¥å£
- **URL**: `POST /chat`
- **å‚æ•°**: `{"text": "ç”¨æˆ·æ¶ˆæ¯", "session_id": "ä¼šè¯ID(å¯é€‰)"}`
- **è¿”å›**: `{"content": "AIå›å¤", "session_id": "ä¼šè¯ID"}`

### å†å²è®°å½•æ¥å£
- **URL**: `GET /chat/history?session_id=xxx&limit=20`
- **è¿”å›**: ä¼šè¯çš„å†å²æ¶ˆæ¯è®°å½•

### ç»Ÿè®¡æ¥å£
- **URL**: `GET /stats?date=2025-08-21`
- **è¿”å›**: æŒ‡å®šæ—¥æœŸçš„è®¿å®¢ç»Ÿè®¡æ•°æ®

## æŠ€æœ¯æ ˆ

- **å‰ç«¯**: HTML5, CSS3, JavaScript (ES6+)
- **åç«¯**: Python 3.12, Flask 2.0+
- **æ•°æ®åº“**: SQLite 3
- **AIæœåŠ¡**: å­—èŠ‚è·³åŠ¨è±†åŒ…API (ARK)
- **éƒ¨ç½²**: Linux, Nginx (å¯é€‰)

## å®‰å…¨è¯´æ˜

1. **APIå¯†é’¥**: è¯·å¦¥å–„ä¿ç®¡ `ARK_API_KEY`
2. **æ•°æ®åº“**: å®šæœŸå¤‡ä»½ï¼Œé¿å…æ•°æ®ä¸¢å¤±
3. **æ—¥å¿—**: å®šæœŸæ¸…ç†ï¼Œé¿å…ç£ç›˜ç©ºé—´ä¸è¶³
4. **è®¿é—®æ§åˆ¶**: ç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½®é˜²ç«å¢™å’Œè®¿é—®é™åˆ¶

## ç»´æŠ¤æ‰‹å†Œ

è¯¦ç»†çš„ç»´æŠ¤è¯´æ˜è¯·å‚è€ƒ **[MAINTENANCE_GUIDE.md](MAINTENANCE_GUIDE.md)**ï¼ŒåŒ…å«ï¼š
- å®Œæ•´çš„è¿ç»´æµç¨‹
- æ•…éšœæ’æŸ¥æŒ‡å—
- æ€§èƒ½ä¼˜åŒ–å»ºè®®
- å®‰å…¨æœ€ä½³å®è·µ

## å¼€å‘è€…

- **å§“å**: ä½•è‡´åŠ›
- **å­¦æ ¡**: æ–°åŠ å¡å—æ´‹ç†å·¥å¤§å­¦
- **ä¸“ä¸š**: åŒºå—é“¾
- **é¡¹ç›®åœ°å€**: https://github.com/Shr1mpTop/hezhili.online

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›ä¸ªäººå­¦ä¹ å’Œå±•ç¤ºä½¿ç”¨ã€‚

---

æœ€åæ›´æ–°: 2025å¹´8æœˆ21æ—¥
å‰ç«¯æ–‡ä»¶ä½äº frontend/public ç›®å½•ï¼Œå¯ä»¥ç›´æ¥éƒ¨ç½²åˆ°é™æ€æ–‡ä»¶æœåŠ¡å™¨ã€‚

## APIæ–‡æ¡£

### Chat API
- URL: https://api.hezhili.online/chat
- æ–¹æ³•: POST
- è¯·æ±‚ä½“:
  ```json
  {
    "text": "ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬"
  }
  ```
- å“åº”: æ–‡æœ¬å“åº”

## æŠ€æœ¯æ ˆ
- å‰ç«¯: HTML, CSS, JavaScript
- åç«¯: Python, Flask
- API: OpenAI API
